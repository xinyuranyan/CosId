(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{435:function(t,a,e){"use strict";e.r(a);var v=e(17),_=Object(v.a)({},(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"snowflakeid-配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#snowflakeid-配置"}},[t._v("#")]),t._v(" SnowflakeId 配置")]),t._v(" "),e("blockquote",[e("p",[e("code",[t._v("me.ahoo.cosid.spring.boot.starter.snowflake.SnowflakeIdProperties")])])]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[t._v("名称")]),t._v(" "),e("th",[t._v("数据类型")]),t._v(" "),e("th",[t._v("说明")]),t._v(" "),e("th",[t._v("默认值")])])]),t._v(" "),e("tbody",[e("tr",[e("td",[t._v("enabled")]),t._v(" "),e("td",[e("code",[t._v("boolean")])]),t._v(" "),e("td",[t._v("是否启用")]),t._v(" "),e("td",[e("code",[t._v("false")])])]),t._v(" "),e("tr",[e("td",[t._v("zone-id")]),t._v(" "),e("td",[e("code",[t._v("String")])]),t._v(" "),e("td",[t._v("时区")]),t._v(" "),e("td",[e("code",[t._v("ZoneId.systemDefault().getId()")])])]),t._v(" "),e("tr",[e("td",[t._v("epoch")]),t._v(" "),e("td",[e("code",[t._v("long")])]),t._v(" "),e("td",[t._v("EPOCH")]),t._v(" "),e("td",[e("code",[t._v("CosId.COSID_EPOCH")]),t._v(" "),e("br"),t._v(" (UTC 2019-12-24 16:00)")])]),t._v(" "),e("tr",[e("td",[t._v("clock-backwards")]),t._v(" "),e("td",[e("code",[t._v("ClockBackwards")])]),t._v(" "),e("td",[t._v("时钟回拨配置")]),t._v(" "),e("td")]),t._v(" "),e("tr",[e("td",[t._v("machine")]),t._v(" "),e("td",[e("code",[t._v("Machine")])]),t._v(" "),e("td",[t._v("机器号分配器配置")]),t._v(" "),e("td")]),t._v(" "),e("tr",[e("td",[t._v("share")]),t._v(" "),e("td",[e("code",[t._v("IdDefinition")])]),t._v(" "),e("td",[t._v("共享ID生成器配置")]),t._v(" "),e("td",[t._v("有")])]),t._v(" "),e("tr",[e("td",[t._v("provider")]),t._v(" "),e("td",[e("code",[t._v("Map<String, IdDefinition>")])]),t._v(" "),e("td",[t._v("多ID生成器配置")]),t._v(" "),e("td",[e("code",[t._v("null")])])])])]),t._v(" "),e("h2",{attrs:{id:"clockbackwards"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#clockbackwards"}},[t._v("#")]),t._v(" ClockBackwards")]),t._v(" "),e("blockquote",[e("p",[e("code",[t._v("me.ahoo.cosid.spring.boot.starter.snowflake.SnowflakeIdProperties.ClockBackwards")])])]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[t._v("名称")]),t._v(" "),e("th",[t._v("数据类型")]),t._v(" "),e("th",[t._v("说明")]),t._v(" "),e("th",[t._v("默认值")])])]),t._v(" "),e("tbody",[e("tr",[e("td",[t._v("spin-threshold")]),t._v(" "),e("td",[e("code",[t._v("int")])]),t._v(" "),e("td",[t._v("自旋同步阈值（ms）")]),t._v(" "),e("td",[e("code",[t._v("10")])])]),t._v(" "),e("tr",[e("td",[t._v("broken-threshold")]),t._v(" "),e("td",[e("code",[t._v("int")])]),t._v(" "),e("td",[t._v("抛出异常（"),e("code",[t._v("ClockTooManyBackwardsException")]),t._v("）阈值（ms）")]),t._v(" "),e("td",[e("code",[t._v("2000")])])])])]),t._v(" "),e("h2",{attrs:{id:"machine"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#machine"}},[t._v("#")]),t._v(" Machine")]),t._v(" "),e("blockquote",[e("p",[e("code",[t._v("me.ahoo.cosid.spring.boot.starter.snowflake.SnowflakeIdProperties.Machine")])])]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[t._v("名称")]),t._v(" "),e("th",[t._v("数据类型")]),t._v(" "),e("th",[t._v("说明")]),t._v(" "),e("th",[t._v("默认值")])])]),t._v(" "),e("tbody",[e("tr",[e("td",[t._v("stable")]),t._v(" "),e("td",[e("code",[t._v("boolean")])]),t._v(" "),e("td",[t._v("是否为稳定的实例,稳定实例将不回收机器号")]),t._v(" "),e("td",[e("code",[t._v("false")])])]),t._v(" "),e("tr",[e("td",[t._v("port")]),t._v(" "),e("td",[e("code",[t._v("Integer")])]),t._v(" "),e("td",[t._v("端口号")]),t._v(" "),e("td",[t._v("进程ID（PID）")])]),t._v(" "),e("tr",[e("td",[t._v("instanceId")]),t._v(" "),e("td",[e("code",[t._v("String")])]),t._v(" "),e("td",[t._v("应用实例编号(全局唯一)")]),t._v(" "),e("td",[t._v("应用IP:PID")])]),t._v(" "),e("tr",[e("td",[t._v("machineBit")]),t._v(" "),e("td",[e("code",[t._v("int")])]),t._v(" "),e("td",[t._v("机器位数")]),t._v(" "),e("td",[e("code",[t._v("10")])])]),t._v(" "),e("tr",[e("td",[t._v("stateStorage")]),t._v(" "),e("td",[e("code",[t._v("Machine.StateStorage")])]),t._v(" "),e("td",[t._v("机器状态存储")]),t._v(" "),e("td")]),t._v(" "),e("tr",[e("td",[t._v("distributor")]),t._v(" "),e("td",[e("code",[t._v("Machine.Distributor")])]),t._v(" "),e("td",[t._v("机器号分发器")]),t._v(" "),e("td")])])]),t._v(" "),e("h3",{attrs:{id:"machine-statestorage"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#machine-statestorage"}},[t._v("#")]),t._v(" Machine.StateStorage")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[t._v("名称")]),t._v(" "),e("th",[t._v("数据类型")]),t._v(" "),e("th",[t._v("说明")]),t._v(" "),e("th",[t._v("默认值")])])]),t._v(" "),e("tbody",[e("tr",[e("td",[t._v("enabled")]),t._v(" "),e("td",[e("code",[t._v("boolean")])]),t._v(" "),e("td",[t._v("是否启用状态存储")]),t._v(" "),e("td",[e("code",[t._v("true")])])]),t._v(" "),e("tr",[e("td",[t._v("local")]),t._v(" "),e("td",[e("code",[t._v("Machine.StateStorage.Local")])]),t._v(" "),e("td",[t._v("本地机器状态存储配置")]),t._v(" "),e("td")])])]),t._v(" "),e("h4",{attrs:{id:"machine-statestorage-local"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#machine-statestorage-local"}},[t._v("#")]),t._v(" Machine.StateStorage.Local")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[t._v("名称")]),t._v(" "),e("th",[t._v("数据类型")]),t._v(" "),e("th",[t._v("说明")]),t._v(" "),e("th",[t._v("默认值")])])]),t._v(" "),e("tbody",[e("tr",[e("td",[t._v("state-location")]),t._v(" "),e("td",[e("code",[t._v("String")])]),t._v(" "),e("td",[t._v("状态存储位置")]),t._v(" "),e("td",[e("code",[t._v("./cosid-machine-state/")])])])])]),t._v(" "),e("h3",{attrs:{id:"machine-distributor"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#machine-distributor"}},[t._v("#")]),t._v(" Machine.Distributor")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[t._v("名称")]),t._v(" "),e("th",[t._v("数据类型")]),t._v(" "),e("th",[t._v("说明")]),t._v(" "),e("th",[t._v("默认值")])])]),t._v(" "),e("tbody",[e("tr",[e("td",[t._v("type")]),t._v(" "),e("td",[e("code",[t._v("Machine.Distributor.Type")])]),t._v(" "),e("td",[t._v("机器号分配器类型："),e("code",[t._v("MANUAL")]),t._v("/"),e("code",[t._v("STATEFUL_SET")]),t._v("/"),e("code",[t._v("JDBC")]),t._v("/"),e("code",[t._v("REDIS")]),t._v("/"),e("code",[t._v("ZOOKEEPER")])]),t._v(" "),e("td",[e("code",[t._v("MANUAL")])])]),t._v(" "),e("tr",[e("td",[t._v("manual")]),t._v(" "),e("td",[e("code",[t._v("Machine.Distributor.Manual")])]),t._v(" "),e("td",[t._v("手动分配器配置")]),t._v(" "),e("td")])])]),t._v(" "),e("h4",{attrs:{id:"machine-distributor-manual"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#machine-distributor-manual"}},[t._v("#")]),t._v(" Machine.Distributor.Manual")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[t._v("名称")]),t._v(" "),e("th",[t._v("数据类型")]),t._v(" "),e("th",[t._v("说明")]),t._v(" "),e("th",[t._v("默认值")])])]),t._v(" "),e("tbody",[e("tr",[e("td",[t._v("machineId")]),t._v(" "),e("td",[e("code",[t._v("Integer")])]),t._v(" "),e("td",[t._v("机器号")]),t._v(" "),e("td",[e("code",[t._v("null")])])])])]),t._v(" "),e("h2",{attrs:{id:"iddefinition"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#iddefinition"}},[t._v("#")]),t._v(" IdDefinition")]),t._v(" "),e("blockquote",[e("p",[e("code",[t._v("me.ahoo.cosid.spring.boot.starter.snowflake.SnowflakeIdProperties.IdDefinition")])])]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[t._v("名称")]),t._v(" "),e("th",[t._v("数据类型")]),t._v(" "),e("th",[t._v("说明")]),t._v(" "),e("th",[t._v("默认值")])])]),t._v(" "),e("tbody",[e("tr",[e("td",[t._v("clock-sync")]),t._v(" "),e("td",[e("code",[t._v("boolean")])]),t._v(" "),e("td",[t._v("是否开启时钟同步")]),t._v(" "),e("td",[e("code",[t._v("true")])])]),t._v(" "),e("tr",[e("td",[t._v("friendly")]),t._v(" "),e("td",[e("code",[t._v("boolean")])]),t._v(" "),e("td",[t._v("是否启用"),e("code",[t._v("SnowflakeFriendlyId")])]),t._v(" "),e("td",[e("code",[t._v("true")])])]),t._v(" "),e("tr",[e("td",[t._v("timestamp-unit")]),t._v(" "),e("td",[e("code",[t._v("IdDefinition.TimestampUnit")])]),t._v(" "),e("td",[t._v("时间戳位的单位："),e("code",[t._v("SECOND")]),t._v(" / "),e("code",[t._v("MILLISECOND")])]),t._v(" "),e("td",[e("code",[t._v("TimestampUnit.MILLISECOND")])])]),t._v(" "),e("tr",[e("td",[t._v("epoch")]),t._v(" "),e("td",[e("code",[t._v("int")])]),t._v(" "),e("td",[t._v("EPOCH")]),t._v(" "),e("td",[e("code",[t._v("cosid.snowflake.epoch")])])]),t._v(" "),e("tr",[e("td",[t._v("timestamp-bit")]),t._v(" "),e("td",[e("code",[t._v("int")])]),t._v(" "),e("td",[t._v("时间戳位数")]),t._v(" "),e("td",[t._v("41")])]),t._v(" "),e("tr",[e("td",[t._v("machine-bit")]),t._v(" "),e("td",[e("code",[t._v("int")])]),t._v(" "),e("td",[t._v("机器位数")]),t._v(" "),e("td",[e("code",[t._v("cosid.snowflake.machine.machine-bit")])])]),t._v(" "),e("tr",[e("td",[t._v("sequence-bit")]),t._v(" "),e("td",[e("code",[t._v("int")])]),t._v(" "),e("td",[t._v("序列位数")]),t._v(" "),e("td",[t._v("12")])]),t._v(" "),e("tr",[e("td",[t._v("converter")]),t._v(" "),e("td",[e("code",[t._v("IdConverterDefinition")])]),t._v(" "),e("td",[t._v("Id转换器配置")]),t._v(" "),e("td")])])]),t._v(" "),e("p",[e("strong",[t._v("YAML 配置样例")])]),t._v(" "),e("div",{staticClass:"language-yaml extra-class"},[e("pre",{pre:!0,attrs:{class:"language-yaml"}},[e("code",[e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("cosid")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("namespace")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" $"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("spring.application.name"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("snowflake")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("enabled")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token boolean important"}},[t._v("true")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("zone-id")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Asia/Shanghai\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("epoch")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1577203200000")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("clock-backwards")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("spin-threshold")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("broken-threshold")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("2000")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("machine")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("distributor")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("type")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" redis\n      "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("state-storage")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("local")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n          "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("state-location")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" ./cosid"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("machine"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("state/\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("share")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("clock-sync")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token boolean important"}},[t._v("true")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("friendly")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token boolean important"}},[t._v("true")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("provider")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("short_id")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("converter")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n          "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("prefix")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" cosid_\n          "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("type")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" radix\n          "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("radix")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("char-size")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("11")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("pad-start")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token boolean important"}},[t._v("false")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("safe-js")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("machine-bit")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("sequence-bit")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("9")]),t._v("\n")])])])])}),[],!1,null,null,null);a.default=_.exports}}]);